{% extends "base.html" %}
{% block content %}
<h1>Reportes de Empleados</h1>

<form method="post" action="{{ url_for('reportes_listado') }}" class="mb-3">
  <div class="row">
    <div class="col-md-4">
      <label>Departamento:</label>
      <input type="text" name="departamento" class="form-control" placeholder="Ej: Ventas">
    </div>
    <div class="col-md-4">
      <label>Cargo:</label>
      <input type="text" name="cargo" class="form-control" placeholder="Ej: Analista">
    </div>
    <div class="col-md-4">
      <label>Fecha de ingreso:</label>
      <input type="date" name="fecha" class="form-control">
    </div>
  </div>
  <button type="submit" class="btn btn-primary mt-3">Generar Reporte</button>
</form>

{% if data %}
<hr>
<h4>Resultados</h4>
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Departamento</th>
      <th>Cargo</th>
      <th>Salario</th>
      <th>Fecha de Ingreso</th>
      <th>Vacaciones</th>
    </tr>
  </thead>
  <tbody>
    {% for row in data %}
    <tr>
      <td>{{ row.Nombre }}</td>
      <td>{{ row.Departamento }}</td>
      <td>{{ row.Cargo }}</td>
      <td>{{ row.Salario }}</td>
      <td>{{ row.FechaIngreso }}</td>
      <td>{{ row.Vacaciones }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<form method="post" action="{{ url_for('reportes_listado') }}">
  <input type="hidden" name="departamento" value="{{ request.form.departamento }}">
  <input type="hidden" name="fecha" value="{{ request.form.fecha }}">
  <input type="hidden" name="cargo" value="{{ request.form.cargo }}">
  <button name="exportar" value="csv" class="btn btn-secondary">CSV</button>
  <button name="exportar" value="excel" class="btn btn-success">Excel</button>
  <button name="exportar" value="pdf" class="btn btn-danger">PDF</button>
</form>
{% endif %}
{% endblock %}